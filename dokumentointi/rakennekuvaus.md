## Rakennekuvaus

Keskustelujärjestäjä koostuu toisaalta keskenään monin tavoin sisäkkäisistä tietosisältöä hallinnoivista luokista, toisaalta muutamasta mm. teksti- ja mediatiedostojen kanssa työskentelevästä luokasta, sekä muutamasta graafisen käyttöliittymään liittyvästä luokasta.

Tietosisältöä hallinnoivista luokista keskeisin on **Projekti**. Projekti hallinnoi *TreeSet* -tietorakenteessa säilytettävää projektin **Havainto** -instanssien kokoelmaa. Koska havaintoinstanssit ovat ainoa paikka, jonne on tallennettu projektin otteet (**Ote** -luokan instanssien muodossa), Projektilla on runsaasti metodeja myös sellaisia tilanteita varten, joissa tarvitaan koko projektin kaikkia otteita. (Yksittäisellä havainnolla ei ole tietoa projektin *kaikista* otteista.) Kuhunkin otteeseen on puolestaan tallennettu **Tallenne** -instanssi, joka sisältää tietoa mediatiedostosta, johonka Ote liittyy. Lisäksi paketissa **keskjarj.tieto**, jossa em. luokat sijaitsevat, ovat luokat **Osanottaja** sekä **OtettaKoskevaHavainto**. Ensin mainittu ei ole käytössä, mutta roikkuu mukana sen vuoksi, että oikeasti käyttökelpoisessa keskustelujärjestelijässä pitäisi olla mahdollisuus liittää otteisiin myös niitten osanottajia koskevia tietoja. Jälkimmäinen on itse asiassa abstraktin luokan **Havainto** ainoa tällä hetkellä toteutettu aliluokka; Havaintokokoelman Havainto -instanssit ovat nykyisellään siis kaikki otetta koskevia havaintoja.

Paketissa **keskjarj.ohjelma** luokka **TiedostonHallinta** lukee ja tallentaa UTF-8 -muotoisia tekstitiedostoja nio -paketin hyvin yksinkertaisin, mutta kuitenkin tietyssä mielessä turvallisin metodein. Kaikki kolme metodia ovat staattisia. **AnnotaatioidenTuoja** -luokan instansseja käytetään normaalisti projekti -luokasta käsin, luettaessa Elan -annotaatio-ohjelmasta (https://tla.mpi.nl/tools/tla-tools/elan/) exportattuja tekstitiedostoja. Luokasta **Tallentaja** luotu instanssi tallentaa projektin kaikki havainnot tekstitiedostoon, joka muistuttaa rakenteeltaan Elanin tekstitiedostoja. Tämä mahdollistaa luokan **Lataaja** abstraktin metodin *lataa()* ladata tekstitiedostoon tallennettu havaintokokoelma luokan **AnnotaatioidenTuoja** (ja myös **Projekti**) metodeja avuksi käyttäen, varsin yksinkertaisesti. **Lataaja** ei ole kovin hyvin suojautunut esim. "väärän tyyppisiä" tekstitiedostoja vastaa, ja sellaisten latausyritykset varsin helposti voivat johtaa sovelluksen kaatumiseen. **MedianToistaja** on erikoistunut välittämään kutsuja VLC -mediaplayerille, jota siis käytännössä tarvitsee, jos aikoo sovellusta käyttää. Sovelluksen pääluokka on **Keskustelujarjestaja**.

Paketissa **keskjarj.gui** sijaitsee sovelluksen graafinen käyttöliittymä. Pääosa käyttöliittymätoiminnoista on toteutettu luokassa **GUI**, joka luo 

* ikkunan, jossa sovellus toimii; 
* ikkunaan valikkorivin, sekä 
* kaksi välilehteä paketin kahden muun luokan luomille paneeleille.

Luokka **HakuPaneeli** luo paneeliinsa taulukon, sekä siihen joitakin toiminnallisuuksia. Taulukko näyttää projektin kaikki otteet ja havainnot, käyttäjän haluamassa järjestyksessä. Luokassa on yksityinen sisäluokka TaulukkoMalli, ja jonkin verran (valikkoon perustuvia toimintoja ylläpitävää) luokkaa **GUI** varten luotuja metodeja, joilla voidaan vaikuttaa taulukon tilaan.

Luokasta **JarjestelyPaneeli** luodaan instanssi, kun käyttäjä (valikon kautta) ilmaisee haluavansa järjestellä otteita havaintoluokkiin siirtelemällä niitä edustavia suorakaiteita hiirellä ikkunan eri puolille. Luokka sisältää mm. pienenpienen yksityisen sisäluokan **SuoraKaide**, joka tallettaa suorakaiteen sijainnin ja ominaisuuksien lisäksi tietoa otteesta, jota suorakaiteen näytöllä liikuteltavissa oleva ilmentymä edustaa keskustelutapahtumien luokittelun kannalta.
